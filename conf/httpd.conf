LoadModule mime_module /etc/httpd/modules/mod_mime.so
LoadModule dir_module /etc/httpd/modules/mod_dir.so
LoadModule env_module /etc/httpd/modules/mod_env.so
LoadModule log_config_module /etc/httpd/modules/mod_log_config.so
LoadModule setenvif_module /etc/httpd/modules/mod_setenvif.so
LoadModule rewrite_module /etc/httpd/modules/mod_rewrite.so
LoadModule authn_file_module /etc/httpd/modules/mod_authn_file.so
LoadModule auth_basic_module /etc/httpd/modules/mod_auth_basic.so
LoadModule authz_host_module /etc/httpd/modules/mod_authz_host.so
LoadModule authz_user_module /etc/httpd/modules/mod_authz_user.so

User %HTTPD_USER%
Group %HTTPD_GROUP%

ServerRoot %WWWROOT% 
ServerName %HOST%

Listen %HTTP_PORT%

ErrorLog %LOGDIR%/httpd/error_log
TransferLog %LOGDIR%/httpd/access_log
LogLevel info 

TypesConfig /etc/mime.types

PidFile %RUNDIR%/httpd.pid

ServerTokens Min
ServerSignature Off
UseCanonicalName Off

<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>


HostnameLookups Off
AddDefaultCharset UTF-8

#
# The following directives modify normal HTTP response behavior to
# handle known problems with browser implementations.
#
BrowserMatch "Mozilla/2" nokeepalive
BrowserMatch "MSIE 4\.0b2;" nokeepalive downgrade-1.0 force-response-1.0
BrowserMatch "RealPlayer 4\.0" force-response-1.0
BrowserMatch "Java/1\.0" force-response-1.0
BrowserMatch "JDK/1\.0" force-response-1.0

#
# The following directive disables redirects on non-GET requests for
# a directory that does not include the trailing slash.  This fixes a 
# problem with Microsoft WebFolders which does not appropriately handle 
# redirects for folders with DAV methods.
# Same deal with Apple's DAV filesystem and Gnome VFS support for DAV.
#
BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-carefully
BrowserMatch "MS FrontPage" redirect-carefully
BrowserMatch "^WebDrive" redirect-carefully
BrowserMatch "^WebDAVFS/1.[0123]" redirect-carefully
BrowserMatch "^gnome-vfs/1.0" redirect-carefully
BrowserMatch "^XML Spy" redirect-carefully
BrowserMatch "^Dreamweaver-WebDAV-SCM1" redirect-carefully

# PHP

<IfModule prefork.c>
        StartServers       0
        MinSpareServers    1
        MaxSpareServers   1
        ServerLimit      256
        MaxClients       256
        MaxRequestsPerChild  4000

        LoadModule php5_module /etc/httpd/modules/libphp5.so
</IfModule>

AddType application/x-font-ttf .ttf
AddType font/opentype .otf
AddType application/vnd.ms-fontobject .eot
AddType font/x-woff .woff

AddHandler php5-script .php
AddType text/html .php

DirectoryIndex index.php

php_value log_errors 1
php_value session.save_path "%SESSIONSDIR%"

# HTTPS

LoadModule ssl_module /etc/httpd/modules/mod_ssl.so

Listen %HTTPS_PORT%

AddType application/x-x509-ca-cert .crt
AddType application/x-pkcs7-crl    .crl

SSLPassPhraseDialog  builtin

SSLSessionCache         shmcb:/var/cache/mod_ssl/scache(512000)
SSLSessionCacheTimeout  300

SSLMutex default

SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin

SSLCryptoDevice builtin

# APPLICATIONS

NameVirtualHost *:%HTTP_PORT%
NameVirtualHost *:%HTTPS_PORT%

Include %RUNDIR%/conf/httpd-www.conf
